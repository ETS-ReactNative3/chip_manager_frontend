(this.webpackJsonpchip_counter_app=this.webpackJsonpchip_counter_app||[]).push([[0],{108:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAACCCAYAAACKAxD9AAAACXBIWXMAABcRAAAXEQHKJvM/AAAG6UlEQVR4nO2d4XHbOBCFcTf5b3ZwSgWWK7BSQZQKzq4gugqidOBUcFIHVgWRKzi5A6sDsQJnqFne8QSAAkAA3AXfN8OxR5RskXhc7AKLxW/v7+8KgN8nfwfAGQgBnIEQwBkIAZz5UPBtWCilZnTMlVIV/f6H9k47L3TmoJQ6KaX2Sqk3OoqilKihooZvj1vtHXGpSRTtcch9wbGRLITmKX/I1PDXaIXxTMfpyvvZIU0IjWlfKaWWniY+NzsSxIbxd/wfUoTwQMe9doY3NYnhibtfwVkIFTX+ivnT78qWRLHn+OU4CqGixm+OG+2sfJpIZM1NENyE8EA3qQQLcI0tXSuLLoOLEObUj0rzAYZS03Wvx/4iYwuhopvwVTszLY5kDUfrLsYcYl7QQMzURaCoK/xJ1qHSzmZgLCGs6cKn4Av48JWswjz3P87dNVQ00DI1X8CXmqKmbANSOYUwJ7WXGBKmYku+Q3JydQ0PEEEQf9J9S+435LAIjQj+1l4FPrySc51sMiu1RVhDBFG4Te1EprQIGzJtIB51J+yOSiqLsIYIknBDlmEW+4+nsAjwCdIT3WeIbREggjzcxo4mYlqExpH5R3sVpGRH2VqDiWURKq4JF4XzOdbMZSyLcGCQQJqCmq5t30lpN6WzVxeh3azj0M0751MNqH2hoftgYgjhqbAZxLqTeJrCyu0TzLXUJLTgJJehC1wWBYngSGZWYjr6DQl3oZ1xZIiPUA01R4z4Tk/URuKaBOJ+iL8wRAhPBUwiNfH4Hd1AqQLo8i10sClUCIsCRg63qYZrRyYohyFUCGJW8Fho5/lLsAKX3IfkMIQIQXq6ebZkjxHxzn30FUK7+EQqr8K/vys3vtfpKwTpq49K7Q5MrHysgo8QpFuD7wU6hn14WQUfIUi2BkcOq4lGwNkquApBujWYogiUj1VwFcJSsDWoCwh3h+AUIbkKQfITNWURKAr1r4rBRQgL4eMGUxeCchGCy+yj5MGXOlOksOjkHVwjeuKpA/f0f63T1C5CiJIKNRIps6akVXZZ0oijkWtdg2QnUSW0BnP6298E3Z9ey+4iBMmksAgV+R3S/Kbbvm6pdCGkYCU4P9Pann1CSJlsmYsUFqHXxDLHmsrWJwTrhyaMb1FvbljbFELww9rHCuHGtqIaQvCjhHtivAabEGaoblIsXhbB+GZQBMa2hRCmhzH0hRCmida+NiGMUv0TZENrX5sQNMWAotDa1yYERAxl42QRtDeB4tDa2CQEzWyA4tDa2CQEMEEgBHAGQgBnJOwNve1LusxMjPwGljmOpmJaC9pdhQufCivdp93wEXi5nIVE15AXzVvnAoSQFwgBnGGb4WQSAkrppsOYHTQCWhubhADSIcoiKFozCOLDJQNaKx9kE8KUSszkglPiq9a+NiFwGcApCU4Rg9a+EEI+OPkHWvvahKB5lWAwXCzCi/ZKjxA0xYDBcBGCsW37hHDUXgWhcFowZLT2NiEok2cJguHkHxjbtU8IRuWAILiEjtaaUhBCHrhYBGub9gnhwMRP+Elz+CFHbNaB34PLJifWrZf6hND7QSASa3teE4LVlABxvJrmGFyF8IwwshisNRaV4zS01ZwAUfS2o4sQUMtYPru+bkE5CuFgG58GYujtFlyFoGAVRHN0cfp9hACnUSZOe2345CxeNS+AHc671/gIYYNcRnE4P7w+QjjBKoiiTiUERf0NfAUZrHw2Ow3dGxrw5ugb6YUIYYNxBfZk2S1eTWSjbansQiYLQ4VwoL2WAS/q0I1Fhqx9XNPUJuBD8G74QxfBSt7WpjR2Q2aKhwqh6SL+0l4FuTkOfShjLIt/ooJXYBxq2r0tqEtoiVUfYQV/YTRWthR1H2IJ4USqxFxEXn7EShGIWTHljRZyQAx52MYcz4ldOueASCILr7Hvc4oaSk0I86i9CmLxmmIJXapiWhuIIQmtCAZFCCZSVlWDGOKSTAQqQ3m9DdVShgM5jG1KEahMdRb3iCYGsR0yh+BKroKbB1oajkEnPx5zRWE5K6+eqI7QD+0MuKSZO7jLuZ5kjBK8zSDIF3QVVnb0wGQtXTRWLeZnulikvP1HTTO5gyeQQhizKHc7JP0I6/CvFRhtuQCH6uwbciSnOJV9pG5yaat/mAsuZfpP5B3fTaS7qCnnc8al/gS3/RoO1F18KlQQXQGwWh/CdeOOfWGCuBRAdmfwGtx3cGkF8ZHGH6Q5lS/kDFdcBdAiZSufNxp/qMi52mnv4MORnv6PJGIRRUYk7AR7yTMdFd3oJf0cc5ucF/pOe6k1rCUKoeXUEYWiOHxOomh+3mqfiENbz3jfaXi2Jt8V05bAYIJguz9wBkIAZyAEcAZCAEoppX4BGxWJRISub6IAAAAASUVORK5CYII="},109:function(e,t,a){e.exports=a.p+"static/media/twitter-icon.89eaa742.svg"},110:function(e,t){},112:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsBAMAAADsqkcyAAAAElBMVEXk5ORwcHCrq6ulpaWcnJysrKyo8ZZsAAAABnRSTlMAC1A1IGVYh68sAAAAcklEQVR4Xu3RsQ3EMAxD0Wcn13sEj+ARMkL2n+agjo0muANE4hcCQUFelJFoliysQA7HzZ1YKj9OItbCnIkAvInNdpfdNGl6d1eCj7LEgWFjB/LUXFyJpfLHk4i9MUYifECiZrvLbpo0vZsrf/Xz/89/ATY+G+WnjEVsAAAAAElFTkSuQmCC"},132:function(e,t,a){e.exports=a(165)},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a(12),i=a(27),l=a(42),s=a(213),u=a(195),d=a(167),p=function(){return r.a.createElement(s.a,{position:"relative",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},r.a.createElement(s.a,{textAlign:"center"},r.a.createElement(u.a,{size:80}),r.a.createElement(d.a,null,"Loading...")))};var m=function(e){var t=Object.assign({},e);return Object(o.d)((function(e){return e.data.playerSession})).isLoggedIn?r.a.createElement(l.b,t):r.a.createElement(l.a,{to:"/login"})},b=a(197),E=a(168),f=a(9),A=a.n(f),h=a(38),C=a(107),O="wss://poker-webapp-backend.herokuapp.com/",_="https://poker-webapp-backend.herokuapp.com/api",v="https://poker-webapp-backend.herokuapp.com/auth/twitter",g="https://poker-webapp-backend.herokuapp.com/auth/facebook",I=a.n(C).a.create({baseURL:_,headers:{Accept:"application/json"},withCredentials:!0});I.interceptors.response.use((function(e){var t=localStorage.getItem("current-client-version"),a=e.headers["current-client-version"];return localStorage.setItem("current-client-version",a),t&&t!==a&&window.location.reload(),e}));var y=function(e,t,a,n){var r=new FormData;return r.append("type","PLAYER_ACTION_TAKE_SEAT"),r.append("table_id",e),r.append("player_id",t),r.append("seat_no",a),r.append("buy_in_amount",n),I.post("/game_dealer/take_seat",r)},T=function(e,t){var a=new FormData;return a.append("type","PLAYER_ACTION_TAKE_SEAT"),a.append("table_id",e),a.append("seat_no",t),I.post("/game_dealer/add_npc_player",a)},N=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=new FormData;return r.append("type",e),r.append("table_id",t),r.append("player_id",a),n&&r.append("amount",n),I.post("/game_dealer",r)},x=function(e){var t=new FormData;return t.append("table_id",e),I.post("/game_dealer/start",t)},j=function(e){var t=e.name,a=e.sb,n=e.bb,r=new FormData;return r.append("table[name]",t),r.append("table[sb_size]",a),r.append("table[bb_size]",n),I.post("/tables",r)},S=function(e){var t=e.name,a=new FormData;return a.append("nickname",t),I.post("/session",a)},k=function(){return I.get("/players/@me")},R=function(){return Object(h.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.clear(),e.next=3,I.delete("/session");case 3:window.location.href="/login";case 4:case"end":return e.stop()}}),e)})))},w=function(e){return{button:{width:"200px"},container:{display:"flex",flexDirection:"column",justifyContent:"space-around",position:"fixed",height:"50%",width:"80%",textAlign:"center",margin:"auto",top:0,bottom:0,left:0,right:0,borderRadius:e.spacing(1)},link:{textDecoration:"none"}}},L=Object(E.a)(w);var D=function(){var e=L(),t=R();return r.a.createElement("div",{className:e.container},r.a.createElement(s.a,null,r.a.createElement(i.b,{to:"/newTable",className:e.link},r.a.createElement(b.a,{variant:"outlined",className:e.button},"\u65b0\u898f\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210"))),r.a.createElement(s.a,null,r.a.createElement(i.b,{to:"/tables",className:e.link},r.a.createElement(b.a,{variant:"outlined",className:e.button},"\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7"))),r.a.createElement(s.a,null,r.a.createElement(b.a,{variant:"outlined",className:e.button,onClick:t},"\u30ed\u30b0\u30a2\u30a6\u30c8")))},B=a(217),P=a(108),F=a.n(P),H=function(e){return{button:{backgroundColor:"#1877F2",width:"300px",color:e.palette.common.white,textTransform:"none","&:hover":{backgroundColor:e.palette.twitter.main}},icon:{width:"30px",height:"auto"}}},M=Object(E.a)(H);var G=function(){var e=M();return r.a.createElement(b.a,{variant:"contained",startIcon:r.a.createElement(B.a,{src:F.a,className:e.icon}),className:e.button,href:g},"Facebook\u3067\u30ed\u30b0\u30a4\u30f3")},U=a(109),Y=a.n(U),K=function(e){return{button:{color:e.palette.common.white,width:"300px",backgroundColor:e.palette.twitter.main,textTransform:"none","&:hover":{backgroundColor:e.palette.twitter.main}},icon:{width:"30px",height:"auto"}}},z=Object(E.a)(K);var W=function(){var e=z();return r.a.createElement(b.a,{variant:"contained",className:e.button,startIcon:r.a.createElement(B.a,{src:Y.a,className:e.icon}),href:v},"Twitter\u3067\u30ed\u30b0\u30a4\u30f3")},Q=a(13),J=a(212),Z=a(66),V=a(20),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(Q.a)(t,2),r=a[0],c=a[1],o=function(e){var t=e.target,a=t.name,n=t.value;c((function(e){return Object(V.a)({},e,Object(Z.a)({},a,n))}))};return[r,o]},q=a(35),$=function(){var e=Object(l.f)(),t=Object(o.c)();return function(){var a=Object(h.a)(A.a.mark((function a(n){var r,c,o,i,l;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,S(n);case 2:r=a.sent,c=Object(q.camelizeKeys)(r.data),o=c.jwt,i=c.nickname,l=c.playerId,localStorage.setItem("playerSession.jwt",o),t({type:"LOGIN_FORM_ON_SUCCESS",nickname:i,playerId:l}),e.push("/");case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},ee=a(110),te=a.n(ee),ae=Object(E.a)(te.a);var ne=function(){var e=ae(),t=X({name:""}),a=Object(Q.a)(t,2),n=a[0],c=a[1],o=$();return r.a.createElement(s.a,{className:e.container},r.a.createElement(J.a,{name:"name",label:"\u30e6\u30fc\u30b6\u30fc\u540d",value:n.name,onChange:c}),r.a.createElement(b.a,{variant:"outlined",onClick:function(){return o(n)}},"\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u30a4\u30f3"))},re=function(e){return{container:{display:"flex",flexDirection:"column",justifyContent:"center",position:"fixed",height:"50%",width:"80%",textAlign:"center",margin:"auto",top:0,bottom:0,left:0,right:0,background:"rgba(200, 200, 200, 0.3)",borderRadius:"30px"}}},ce=Object(E.a)(re);var oe=function(){var e=ce();return Object(o.d)((function(e){return e.data.playerSession})).isLoggedIn?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",{className:e.container},r.a.createElement(d.a,{variant:"h6"},"\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044"),r.a.createElement(s.a,{mt:2},r.a.createElement(W,null)),r.a.createElement(s.a,{mt:2},r.a.createElement(G,null)),r.a.createElement(s.a,{mt:5},r.a.createElement(ne,null)))},ie=function(){var e=Object(l.f)();return function(){var t=Object(h.a)(A.a.mark((function t(a){var n,r,c;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(a);case 2:n=t.sent,r=Object(q.camelizeKeys)(n.data),c=r.tableId,e.push("/tables/".concat(c));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},le=function(e){return{container:{display:"flex",flexDirection:"column",justifyContent:"center",position:"fixed",height:"50%",width:"80%",textAlign:"center",margin:"auto",top:0,bottom:0,left:0,right:0,backgroundColor:e.palette.common.white,borderRadius:e.spacing(1)},formGroup:{marginBottom:e.spacing(2)}}},se=Object(E.a)(le),ue={name:"",sb:50,bb:100};var de=function(){var e=se(),t=Object(n.useState)(!1),a=Object(Q.a)(t,2),c=a[0],o=a[1],i=X(ue),l=Object(Q.a)(i,2),u=l[0],p=l[1],m=ie();return r.a.createElement("div",{className:e.container},r.a.createElement(d.a,{variant:"h6"},"\u65b0\u3057\u304f\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b"),r.a.createElement(s.a,{mt:2},r.a.createElement("div",{className:e.formGroup},r.a.createElement(J.a,{name:"name",label:"\u30c6\u30fc\u30d6\u30eb\u540d",variant:"outlined",value:u.name,onChange:p,disabled:c,autoFocus:!0})),r.a.createElement("div",{className:e.formGroup},r.a.createElement(J.a,{name:"sb",label:"SB",variant:"outlined",value:u.sb,onChange:p,disabled:c})),r.a.createElement("div",{className:e.formGroup},r.a.createElement(J.a,{name:"bb",label:"BB",variant:"outlined",value:u.bb,onChange:p,disabled:c})),r.a.createElement("div",{className:e.formGroup},r.a.createElement(b.a,{disabled:c,variant:"contained",color:"primary",onClick:function(){o(!0),m(u)}},"\u4f5c\u6210"))))};var pe=function(){return r.a.createElement("div",null,r.a.createElement(de,null))},me=a(201),be=a(202),Ee=a(203),fe=a(199),Ae=a(200),he=function(e){return{link:{textDecoration:"none"}}},Ce=Object(E.a)(he);var Oe=function(e){var t=e.table,a=Ce();return r.a.createElement(fe.a,null,r.a.createElement(Ae.a,null,t.name),r.a.createElement(Ae.a,null,t.players.length," \u540d"),r.a.createElement(Ae.a,null,r.a.createElement(i.b,{to:"/tables/".concat(t.id),className:a.link},r.a.createElement(b.a,{variant:"outlined"},"\u53c2\u52a0"))))},_e=function(){var e=Object(n.useState)([]),t=Object(Q.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),o=Object(Q.a)(c,2),i=o[0],l=o[1],s=function(){var e=Object(h.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/tables");case 2:t=e.sent,a=Object(q.camelizeKeys)(t.data),n=a.tables,r(n),l(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s()}),[]),[a,i]};var ve=function(){var e=_e(),t=Object(Q.a)(e,2),a=t[0];return t[1]?r.a.createElement(me.a,null,r.a.createElement(be.a,null,r.a.createElement(fe.a,null,r.a.createElement(Ae.a,null,"\u30c6\u30fc\u30d6\u30eb\u540d"),r.a.createElement(Ae.a,null,"\u53c2\u52a0\u4eba\u6570"),r.a.createElement(Ae.a,null))),r.a.createElement(Ee.a,null,a.map((function(e){return r.a.createElement(Oe,{table:e,key:e.id})})))):r.a.createElement("div",{style:{height:"100vh"}},r.a.createElement(p,null))},ge=a(69),Ie=a(70),ye=a(71),Te=a(72),Ne=a(75),xe=a.n(Ne),je=function(){return Object(o.d)((function(e){return e.scenes.Tables.Room})).Players},Se=function(){return Object(o.d)((function(e){return e.data})).playerSession},ke=function(e){var t=Object(o.c)();return function(a){t({type:"INCREMENT_BET_SIZE",playerId:e.id,playerStack:e.stack,amount:a})}},Re=function(e){return{button:{backgroundColor:e.palette.common.white,fontSize:e.typography.subtitle1.fontSize,fontWeight:e.typography.fontWeightBold,minWidth:"80px","&:hover":{backgroundColor:e.palette.common.white}},container:{position:"relative",height:"100%",display:"flex",alignItems:"center",justifyContent:"space-around"}}},we=Object(E.a)(Re),Le=function(){var e=we(),t=je(),a=Se(),n=t.find((function(e){return e.id===a.playerId})),c=ke(n);return r.a.createElement("div",{className:e.container},r.a.createElement("div",null,r.a.createElement(b.a,{startIcon:r.a.createElement(xe.a,null),className:e.button,variant:"outlined",color:"primary",onClick:function(){return c(25)}},"25")),r.a.createElement("div",null,r.a.createElement(b.a,{startIcon:r.a.createElement(xe.a,null),className:e.button,variant:"outlined",color:"primary",onClick:function(){return c(100)}},"100")),r.a.createElement("div",null,r.a.createElement(b.a,{startIcon:r.a.createElement(xe.a,null),className:e.button,variant:"outlined",color:"primary",onClick:function(){return c(500)}},"500")))},De=(a(161),function(){return r.a.createElement("div",{style:{height:"100%",position:"relative"}},r.a.createElement("div",{style:{top:0,bottom:0,left:0,right:0,position:"absolute",margin:"auto",textAlign:"center"}},r.a.createElement(u.a,{thickness:4,size:40})))}),Be=a(215),Pe=a(205),Fe=a(56),He=a.n(Fe),Me=a(204),Ge=function(e){return{container:{position:"absolute",top:"0px",right:"0px",background:"rgba(0, 0, 0, 0.7)",padding:e.spacing(1),zIndex:e.zIndex.appBar,borderRadius:"2px"},handCount:{color:e.palette.common.white,display:"inline-block"},round:{color:e.palette.common.white,display:"inline-block",marginRight:e.spacing(1)}}},Ue=Object(Me.a)(Ge);var Ye=function(e){var t=e.handCount,a=e.round,n=Ue();return r.a.createElement("div",{className:n.container},r.a.createElement(d.a,{variant:"caption",className:n.round},function(e){switch(e){case"preflop":return"\u30d7\u30ea\u30d5\u30ed\u30c3\u30d7";case"flop":return"\u30d5\u30ed\u30c3\u30d7";case"turn":return"\u30bf\u30fc\u30f3";case"river":return"\u30ea\u30d0\u30fc";case"finished":return"\u7d42\u4e86";default:return e}}(a)),r.a.createElement(d.a,{variant:"caption",className:n.handCount},"\u7b2c",t,"\u30b2\u30fc\u30e0"))},Ke=function(){var e,t=Object(o.d)((function(e){return e.scenes.Tables.Room})).GameTable,a=!(!(e=t.gameHandState)||"finished"===e||"init"===e);return Object(V.a)({},t,{inGame:a})},ze=(a(162),function(e){Object(Te.a)(a,e);var t=Object(ye.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(Ie.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.rank,n=t.suit,c=t.invisible,o="s"===n?"spades":"h"===n?"hearts":"d"===n?"diamonds":"clubs";switch(a){case"T":e="rank10";break;case"J":e="rank11";break;case"Q":e="rank12";break;case"K":e="rank13";break;case"A":e="rank1";break;default:e="rank".concat(a)}var i=c?"poker-card-back":"poker-card-face";return r.a.createElement("div",null,r.a.createElement("div",{className:"poker-card ".concat(o," ").concat(e)},r.a.createElement("div",{className:i},r.a.createElement("div",{className:"poker-card-face-suit"},"s"===n&&r.a.createElement("span",null,"\u2660"),"h"===n&&r.a.createElement("span",null,"\u2665"),"d"===n&&r.a.createElement("span",null,"\u2666"),"c"===n&&r.a.createElement("span",null,"\u2663")))))}}]),a}(n.Component)),We=function(e){var t=e.gameTable;return r.a.createElement("div",{style:{position:"relative",width:"100%",background:"gray"}},r.a.createElement("div",{style:{position:"absolute",left:"calc(50% - 72px)",transform:"translate(-50%, 0%)"}},t.boardCards&&t.boardCards[0]&&t.reachedRounds.flop?r.a.createElement(ze,{rank:t.boardCards[0][0],suit:t.boardCards[0][1]}):r.a.createElement(ze,{invisible:!0})),r.a.createElement("div",{style:{position:"absolute",left:"calc(50% - 36px)",transform:"translate(-50%, 0%)"}},t.boardCards&&t.boardCards[1]&&t.reachedRounds.flop?r.a.createElement(ze,{rank:t.boardCards[1][0],suit:t.boardCards[1][1]}):r.a.createElement(ze,{invisible:!0})),r.a.createElement("div",{style:{position:"absolute",left:"50%",transform:"translate(-50%, 0%)"}},t.boardCards&&t.boardCards[2]&&t.reachedRounds.flop?r.a.createElement(ze,{rank:t.boardCards[2][0],suit:t.boardCards[2][1]}):r.a.createElement(ze,{invisible:!0})),r.a.createElement("div",{style:{position:"absolute",left:"calc(50% + 36px)",transform:"translate(-50%, 0%)"}},t.boardCards&&t.boardCards[3]&&t.reachedRounds.turn?r.a.createElement(ze,{rank:t.boardCards[3][0],suit:t.boardCards[3][1]}):r.a.createElement(ze,{invisible:!0})),r.a.createElement("div",{style:{position:"absolute",left:"calc(50% + 72px)",transform:"translate(-50%, 0%)"}},t.boardCards&&t.boardCards[4]&&t.reachedRounds.river?r.a.createElement(ze,{rank:t.boardCards[4][0],suit:t.boardCards[4][1]}):r.a.createElement(ze,{invisible:!0})))},Qe=function(e){var t=Object(n.useState)(e),a=Object(Q.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){var e=null;return r>0&&(e=setTimeout((function(){c(r-1)}),1e3)),function(){clearTimeout(e)}}),[r]),r},Je=function(e){return{container:{display:"inline-block",fontSize:e.typography.caption.fontSize,backgroundColor:"rgba(0, 0, 0, 0.7)",color:e.palette.common.white,padding:e.spacing(1),borderRadius:"2px"},remain:{display:"inline-block",fontSize:e.typography.h6.fontSize,width:"24px"}}},Ze=Object(E.a)(Je);var Ve=function(e){var t=e.count,a=Ze(),n=Qe(t);return r.a.createElement(d.a,{className:a.container},"\u6b21\u306e\u30cf\u30f3\u30c9\u958b\u59cb\u307e\u3067\u3042\u3068",r.a.createElement(d.a,{component:"span",className:a.remain},n),"\u79d2")},Xe=function(e){return{container:{position:"absolute",height:"300px",width:"50%",maxWidth:"300px",top:"25%",left:"50%",transform:"translate(-50%, 0)",display:"flex",flexDirection:"column",justifyContent:"center"},pot:{backgroundColor:"rgba(0, 0, 0, 0.7)",color:e.palette.common.white,padding:e.spacing(1),width:"100px",margin:"16px auto",borderRadius:"2px"}}},qe=Object(E.a)(Xe);var $e=function(){var e=qe(),t=Se(),a=Ke(),n=je(),c=Object(o.c)(),i=Object(l.g)().params.id,u=n.some((function(e){return e.id===t.playerId}));return a.inGame?r.a.createElement("div",{className:e.container},r.a.createElement(s.a,{textAlign:"center"},"init"!==a.round&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.pot},a.pot),r.a.createElement(We,{gameTable:a})))):r.a.createElement("div",{className:e.container},r.a.createElement(s.a,{textAlign:"center"},1===n.length?r.a.createElement("div",null,"\u4ed6\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u53c2\u52a0\u3092\u5f85\u3063\u3066\u3044\u307e\u3059..."):u?r.a.createElement(b.a,{variant:"contained",color:"primary",onClick:function(){c({type:"GAME_START_BUTTON_CLICKED",tableId:i})}},"\u958b\u59cb"):null,a.isOpenGameStartCountdown&&u&&r.a.createElement(s.a,{mt:2},r.a.createElement(Ve,{count:a.timeToStart}))))},et=a(210),tt=a(206),at=a(207),nt=function(e,t){var a=Object(o.c)(),r=Object(n.useState)(""),c=Object(Q.a)(r,2),i=c[0],l=c[1];return[i,function(){a({type:"PLAYER_TAKE_SEAT",tableId:e,seatNo:t,buyInAmount:i})},function(e){l(e.target.value)}]},rt=function(e){var t=e.isOpen,a=e.onClose,n=e.seatNo,c=e.tableId,o=nt(c,n),i=Object(Q.a)(o,3),l=i[0],u=i[1],p=i[2];return r.a.createElement(Be.a,{open:t,onClose:a},r.a.createElement(Pe.a,null,"\u30b7\u30fc\u30c8No. ",n),r.a.createElement(tt.a,null,r.a.createElement(d.a,null,"\u30b9\u30bf\u30c3\u30af\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),r.a.createElement(s.a,{mt:2},r.a.createElement(J.a,{label:"\u30b9\u30bf\u30c3\u30af",autoFocus:!0,placeholder:"10000",onChange:p,value:l}))),r.a.createElement(at.a,null,r.a.createElement(b.a,{onClick:a},"\u30ad\u30e3\u30f3\u30bb\u30eb"),r.a.createElement(b.a,{variant:"contained",color:"primary",onClick:u},"\u7740\u5e2d")))},ct=a(208),ot=a(111),it=a.n(ot),lt=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useState)(e),a=Object(Q.a)(t,2),r=a[0],c=a[1],o=function(){return c(!0)},i=function(){return c(!1)};return[r,o,i]},st=function(){return{container:{width:"100%",position:"absolute",top:"50%",transform:"translate(0%, -50%)",textAlign:"center"}}},ut=Object(E.a)(st),dt=function(e){var t=e.tableId,a=e.seatNo,n=ut(),c=lt(),i=Object(Q.a)(c,3),l=i[0],s=i[1],u=i[2],d=Object(o.c)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:n.container},r.a.createElement(ct.a,{onClick:s},r.a.createElement(it.a,null))),r.a.createElement(Be.a,{open:l,onClose:u},r.a.createElement(Pe.a,null,"\u8ffd\u52a0\u78ba\u8a8d"),r.a.createElement(at.a,null,r.a.createElement(b.a,{onClick:u},"\u9589\u3058\u308b"),r.a.createElement(b.a,{onClick:function(){d({type:"ADD_NPC_PLAYER",tableId:t,seatNo:a})},variant:"contained",color:"primary"},"NPC\u8ffd\u52a0"))))},pt=function(){var e=Object(o.d)((function(e){return e.data})).playerSession;return[Object(o.d)((function(e){return e.scenes.Tables})).Room.Players.some((function(t){return t.id===e.playerId}))]},mt=function(e){return{button:{textTransform:"none"},container:{height:"100%",width:"100%"}}},bt=Object(E.a)(mt),Et=function(e){var t=e.seatNo,a=e.tableId,n=bt(),c=lt(),o=Object(Q.a)(c,3),i=o[0],l=o[1],u=o[2],d=pt();return Object(Q.a)(d,1)[0]?r.a.createElement(s.a,{className:n.container},r.a.createElement(dt,{tableId:a,seatNo:t})):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:n.button,variant:"contained",color:"primary",onClick:l},"\u5ea7\u308b"),r.a.createElement(rt,{tableId:a,seatNo:t,isOpen:i,onClose:u}))},ft=function(e){var t=e.player,a=e.isOpen,n=e.onClose,c=e.tableId,o=lt(),i=Object(Q.a)(o,3),l=i[0],s=i[1],u=i[2];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Be.a,{open:a,onClose:n},r.a.createElement(Pe.a,null,"Player "+t.nickname),r.a.createElement(tt.a,null,r.a.createElement("div",null,"Stack ",t.stack)),r.a.createElement(at.a,null,r.a.createElement(b.a,{variant:"contained",color:"primary",onClick:s},"\u30c1\u30c3\u30d7\u91cf\u8abf\u6574"))),r.a.createElement(rt,{tableId:c,seatNo:t.seat_no,isOpen:l,onClose:u}))},At=a(209),ht=a(6),Ct=Object(ht.a)((function(e){return{plate:{width:"24px",margin:"0 auto",background:e.palette.common.white,textAlign:"center",borderRadius:"50%",boxShadow:"1px 1px 1px 1px black"},label:{lineHeight:"24px"}}}))((function(e){var t=e.classes;return r.a.createElement(At.a,{container:!0,className:t.plate,direction:"column",justify:"center"},r.a.createElement(At.a,{item:!0},r.a.createElement(d.a,{className:t.label},"D")))})),Ot=function(){return{container:{border:"1px solid white"},video:{width:"120px",borderRadius:"120px"}}},_t=Object(E.a)(Ot);var vt=function(e){var t=e.player,a=e.local,c=_t(),i=Object(o.c)();return Object(n.useEffect)((function(){i({type:"INITIALIZE_WEBRTC"})}),[i]),r.a.createElement("div",{className:c.container},r.a.createElement(b.a,{onClick:function(){return i({type:"HANDLE_JOIN_SESSION"})}},"Join"),r.a.createElement(b.a,{onClick:function(){return i({type:"HANDLE_LEAVE_SESSION"})}},"Leave"),a?r.a.createElement("video",{id:"local-video",autoPlay:!0,className:c.video}):r.a.createElement("video",{id:"video-player-".concat(t.id),autoPlay:!0,className:c.video}))},gt=function(e){return{activePanel:{},avatar:{margin:"auto",border:"1px solid ".concat(e.palette.common.white),animation:function(e){return e.isTurn?"onPlayerTurnAvatarBlinkAnimation 1s infinite":""}},betAmount:function(t){var a=t.position,n={position:"absolute",borderRadius:e.spacing(1/4),backgroundColor:"rgba(0, 0, 0, 0.4)",color:e.palette.common.white,padding:e.spacing(.5,1)};switch(a){case"top":return Object(V.a)({},n,{left:"50%",bottom:"-32px",transform:"translate(-50%, 100%)"});case"left":return Object(V.a)({},n,{top:"50%",right:0,transform:"translate(100%, 0%)"});case"right":return Object(V.a)({},n,{top:"50%",left:0,transform:"translate(-100%, 0%)"});default:return n}},dealerButton:function(e){var t={position:"absolute"};switch(e.position){case"top":return Object(V.a)({},t,{left:"50%",bottom:0,transform:"translate(-50%, 100%)"});case"left":return Object(V.a)({},t,{top:"50%",right:0,transform:"translate(100%, -100%)"});case"right":return Object(V.a)({},t,{top:"50%",left:0,transform:"translate(-100%, -100%)"});default:return t}},foldedPanel:{filter:"grayscale(100%)"},nickname:{color:e.palette.common.white,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},panelContainer:function(e){var t=e.player;return{position:"relative",height:"100%",display:"flex",flexDirection:"column",textAlign:"center",filter:t&&1===t.state?"grayscale(100%)":""}},stackSize:{color:"orange"},statusCard:{display:"flex",flexDirection:"column",maxWidth:"140px",width:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",margin:"8px auto",padding:e.spacing(.5),borderRadius:"2px"},"@keyframes onPlayerTurnAvatarBlinkAnimation":{"50%":{boxShadow:"0 3px 15px 1px yellow"}}}},It=Object(E.a)(gt),yt=function(e){var t=e.tableId,a=(e.leftSideStyle,e.rightSideStyle,e.position),n=(e.topRightSideStyle,e.player),c=It({position:a}),o=Ke(),i=lt(),l=Object(Q.a)(i,3),u=l[0],p=l[1],m=l[2];if(!n.id)return r.a.createElement(Et,{tableId:t,seatNo:n.seat_no});var b=n.seat_no===o.currentSeatNo,E=n.hand_show;return r.a.createElement(s.a,{className:c.panelContainer,onClick:p},r.a.createElement("div",null,r.a.createElement(vt,{player:n})),r.a.createElement("div",{className:c.statusCard},n.actionType?r.a.createElement(d.a,{variant:"caption",style:{fontSize:"0.625rem",color:"white"}},function(e){switch(e){case"bet":return"\u30d9\u30c3\u30c8";case"check":return"\u30c1\u30a7\u30c3\u30af";case"call":return"\u30b3\u30fc\u30eb";case"fold":return"\u30d5\u30a9\u30fc\u30eb\u30c9";default:return e}}(n.actionType)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:c.nickname},n.nickname),r.a.createElement("div",{className:c.stackSize},n.stack-(n.betSize||0)),b&&r.a.createElement(et.a,{variant:"determinate",value:n.remain_time_to_action/n.max_remain_time_to_action*100}))),o.inGame&&!n.hand_show&&null!==n.state&&1!==n.state&&r.a.createElement(s.a,{display:"flex",justifyContent:"center"},r.a.createElement(ze,{invisible:!E}),r.a.createElement(ze,{invisible:!E})),n.hand_show&&null!==n.state&&1!==n.state&&r.a.createElement(s.a,{display:"flex",justifyContent:"center"},r.a.createElement(ze,{rank:n.cards[0].rank,suit:n.cards[0].suit}),r.a.createElement(ze,{rank:n.cards[1].rank,suit:n.cards[1].suit})),n.seat_no===o.buttonSeatNo&&r.a.createElement("div",{className:c.dealerButton},r.a.createElement(Ct,null)),"finished"===o.gameHandState&&n.amount_diff&&r.a.createElement("div",{className:c.betAmount},n.amount_diff>0&&r.a.createElement("span",null,"+"),n.amount_diff),o.inGame&&(n.bet_amount_in_state||n.betSize)&&r.a.createElement("div",{className:c.betAmount},n.betSize?"".concat(n.bet_amount_in_state||0," \u2192 ").concat(n.bet_amount_in_state+n.betSize):"".concat(n.bet_amount_in_state>0?n.bet_amount_in_state:"")),r.a.createElement(ft,{isOpen:u,onClose:m,player:n,tableId:t}))},Tt=a(44),Nt=a.n(Tt),xt=function(e){return{avatar:function(e){return{width:"60px",height:"60px",animation:e.isTurn?"onHeroTurnAvatarBlinkAnimation 1s infinite":""}},"@keyframes onHeroTurnAvatarBlinkAnimation":{"50%":{boxShadow:"0 1px 15px 1px yellow"}}}},jt=(Object(E.a)(xt),function(e){return{button:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",textTransform:"none",width:"80px"},leftButton:{left:"calc(50% - 120px)"},rightButton:{left:"calc(50% + 120px)"},nickname:{color:e.palette.common.white,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},heroHoleCard1:{position:"absolute",top:"50px",left:"calc(50% - 15px)",transform:"translate(-50%, -50%)"},heroHoleCard2:{position:"absolute",top:"50px",left:"calc(50% + 15px)",transform:"translate(-50%, -50%)"},panelContainer:function(e){var t=e.player;return{position:"relative",height:"100%",display:"flex",flexDirection:"column",textAlign:"center",filter:t&&1===t.state?"grayscale(100%)":""}},stackSize:{color:"orange"},statusCard:{display:"flex",flexDirection:"column",width:"140px",backgroundColor:"rgba(0, 0, 0, 0.6)",margin:"8px auto",padding:e.spacing(.5),borderRadius:"2px"}}}),St=Object(Me.a)(jt),kt=Object(o.b)(null,(function(e,t){var a=t.tableId,n=t.playerOnTurn;return{dispatchBetAction:function(){e({type:"BET_ACTION",tableId:a,playerId:n.id,amount:n.betSize})},resetBetSize:function(){e({type:"RESET_BET_SIZE",tableId:a,playerId:n.id})},onFoldAction:function(){e({type:"FOLD_ACTION",tableId:a,playerId:n.id})},onCallAction:function(){e({type:"CALL_ACTION",tableId:a,playerId:n.id})},onCheckAction:function(){e({type:"CHECK_ACTION",tableId:a,playerId:n.id})},onMuckAction:function(){e({type:"MUCK_HAND_ACTION",tableId:a,playerId:n.id})},onShowAction:function(){e({type:"SHOW_HAND_ACTION",tableId:a,playerId:n.id})},dispatchProgressTimer:function(t){e({type:"PROGRESS_PLAYER_ACTION_TIMER",tableId:a,playerId:n.id,remainTimeToAction:n.remain_time_to_action-t/1e3})}}}))((function(e){var t=e.onCheckAction,a=e.onFoldAction,n=e.onCallAction,c=e.resetBetSize,o=e.dispatchBetAction,i=e.playerOnTurn,l=e.onMuckAction,u=e.onShowAction,d=e.player,p=e.tableId,m=Ke(),E=lt(),f=Object(Q.a)(E,3),A=f[0],h=f[1],C=f[2],O=St({player:d}),_=d&&d.seat_no===m.currentSeatNo,v=!!!m.lastAggressiveSeatNo||m.lastAggressiveSeatNo===i.seat_no;if(!d||!d.id)return r.a.createElement("div",{className:O.panelContainer},r.a.createElement(Et,{tableId:p,seatNo:1}));var g=m.dealtCards[d.id];return r.a.createElement("div",null,r.a.createElement("div",{className:O.panelContainer},r.a.createElement(s.a,{display:"flex",justifyContent:"center"},r.a.createElement(vt,{player:d,local:!0})),r.a.createElement("div",{className:O.statusCard,onClick:h},r.a.createElement("div",{className:O.nickname},d.nickname),r.a.createElement("div",{className:O.stackSize},d.betSize?d.stack-d.betSize:d.stack),_&&r.a.createElement(et.a,{variant:"determinate",value:d.remain_time_to_action/d.max_remain_time_to_action*100})),g&&2===g.length&&1!==d.state&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:O.heroHoleCard1},r.a.createElement(ze,{rank:g[0].rank,suit:g[0].suit})),r.a.createElement("div",{className:O.heroHoleCard2},r.a.createElement(ze,{rank:g[1].rank,suit:g[1].suit}))),m.inGame&&d&&m.currentSeatNo===d.seat_no?i&&i.betSize>0?r.a.createElement("div",null,r.a.createElement(b.a,{className:Nt()([O.button,O.leftButton]),variant:"contained",onClick:c},"Reset"),r.a.createElement(b.a,{className:Nt()([O.button,O.rightButton]),variant:"contained",onClick:o,color:"primary"},"Bet")):i&&m.showOrMuck?r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:Nt()([O.button,O.leftButton]),variant:"contained",onClick:l},"Muck"),r.a.createElement(b.a,{className:Nt()([O.button,O.rightButton]),variant:"contained",onClick:u},"Show")):d.isHiddenPanel?r.a.createElement("div",null):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:Nt()([O.button,O.leftButton]),variant:"contained",onClick:a,color:"secondary"},"Fold"),v?r.a.createElement(b.a,{className:Nt()([O.button,O.rightButton]),variant:"contained",onClick:t},"Check"):r.a.createElement(b.a,{className:Nt()([O.button,O.rightButton]),variant:"contained",onClick:n,color:"primary"},"Call")):r.a.createElement("div",null)),r.a.createElement(ft,{isOpen:A,onClose:C,player:d,tableId:p}))})),Rt=function(e){return{buttonPlate:{height:"30px",width:"30px",borderRadius:"15px",lineHeight:"30px"},playerChipBetArea:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"space-around",textAlign:"center"},betArea:{background:"rgba(0, 0, 0, 0.4)",borderRadius:e.spacing(1/4),color:e.palette.common.white,padding:e.spacing(1/4)},result:function(t){var a=t.player;return{background:"rgba(0, 0, 0, 0.4)",borderRadius:"4px",color:a&&a.amount_diff>0?"orange":"white",padding:e.spacing(1)}}}},wt=Object(E.a)(Rt);var Lt=function(){var e=Ke(),t=je(),a=Se(),n=t.find((function(e){return e.id===a.playerId})),c=wt({player:n});return n?r.a.createElement("div",{className:c.playerChipBetArea},"finished"===e.gameHandState&&n.amount_diff&&r.a.createElement("div",{className:c.result},n.amount_diff>0&&r.a.createElement("span",null,"+"),n.amount_diff),e.inGame&&n.seat_no===e.buttonSeatNo&&r.a.createElement(Ct,null),e.inGame&&!(!n.bet_amount_in_state&&!n.betSize)&&r.a.createElement("span",{className:c.betArea},n.betSize?"".concat(n.bet_amount_in_state||0," \u2192 ").concat(n.bet_amount_in_state+n.betSize):n.bet_amount_in_state>0&&n.bet_amount_in_state)):null},Dt=function(e,t){for(var a=e.find((function(e){return e.id===t})),n=[],r=function(t){var a=e.find((function(e){return e.seat_no===t+1}));a?n.push(a):n.push({seat_no:t+1})},c=0;c<6;c++)r(c);return a&&(n=n.slice(a.seat_no-1,10).concat(n.slice(0,a.seat_no-1))),n},Bt=a(112),Pt=a.n(Bt),Ft=function(e){return{centralContainer:{position:"absolute",width:"50%",height:"300px",maxWidth:"300px",top:"25%",left:"50%",transform:"translate(-50%, 0)",textAlign:"center"},container:{position:"relative",width:"100%",height:"100%",maxWidth:"640px",margin:"auto",backgroundImage:"url(".concat(Pt.a,")"),backgroundColor:"#338c00",borderRadius:"0%"},playerChipBetArea:{height:"80px",width:"25%",position:"absolute",bottom:"150px",left:"50%",transform:"translate(-50%, 0)"},heroPlayerContainer:{height:"150px",width:"100%",position:"absolute",bottom:0,left:"50%",transform:"translate(-50%, 0)"},playerContainer1:{height:"20%",width:"25%",position:"absolute",top:"400px"},playerContainer2:{height:"20%",width:"25%",position:"absolute",top:"150px"},playerContainer3:{height:"20%",width:"25%",position:"absolute",left:"50%",transform:"translate(-50%, 0)"},playerContainer4:{height:"20%",width:"25%",position:"absolute",top:"150px",right:0},playerContainer5:{height:"20%",width:"25%",position:"absolute",top:"400px",right:0}}},Ht=Object(E.a)(Ft);var Mt=function(e){var t=e.tableId,a=e.gameTable,n=(e.isSeated,e.playerSession),c=e.players,o=(e.onGameStart,Ht()),i=Dt(c,n.playerId),l=function(e){return{player:i[e],tableId:t}},s=c.find((function(e){return e.seat_no===a.currentSeatNo}));return r.a.createElement("div",{className:o.container},r.a.createElement("div",{className:o.playerChipBetArea},r.a.createElement(Lt,null)),r.a.createElement("div",{className:o.heroPlayerContainer},r.a.createElement(kt,Object.assign({},l(0),{playerOnTurn:s}))),r.a.createElement("div",{className:o.playerContainer1},r.a.createElement(yt,Object.assign({},l(1),{position:"left"}))),r.a.createElement("div",{className:o.playerContainer2},r.a.createElement(yt,Object.assign({},l(2),{position:"left"}))),r.a.createElement("div",{className:o.playerContainer3},r.a.createElement(yt,Object.assign({},l(3),{position:"top"}))),r.a.createElement("div",{className:o.playerContainer4},r.a.createElement(yt,Object.assign({},l(4),{position:"right"}))),r.a.createElement("div",{className:o.playerContainer5},r.a.createElement(yt,Object.assign({},l(5),{position:"right"}))),r.a.createElement($e,null))},Gt=function(e){Object(Te.a)(a,e);var t=Object(ye.a)(a);function a(){return Object(ge.a)(this,a),t.apply(this,arguments)}return Object(Ie.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onActionCableConnected,a=e.onActionCableDisconnected,n=e.match,r=e.onGameHandFinishedReceived,c=e.onGameHandActionReceived,o=e.onPlayerActionReceived,i=e.onDealtCardsReceived;this.App||(this.App={}),this.App.cable=He.a.createConsumer("".concat(O,"/cable"));var l=n.params.id;this.App.ChipChannel=this.App.cable.subscriptions.create({channel:"ChipChannel",tableId:l},{connected:function(){console.debug("Chip Channel connected"),t()},disconnected:function(){console.debug("Chip Channel disconnected"),a()},received:function(e){console.debug("Chip Channel received",e),"player_action"===e.type?o(e):"game_hand"===e.type?c(e):"game_hand_finished"===e.type&&r(e)},rejected:function(e){console.debug("Chip Channel rejected",e)}}),this.App.cable_for_dealt_card=He.a.createConsumer("".concat(O,"/cable")),this.App.DealtCardChannel=this.App.cable_for_dealt_card.subscriptions.create({channel:"DealtCardChannel",tableId:l},{connected:function(){console.debug("DealtCardChannel connected")},disconnected:function(){console.debug("DealtCardChannel disconnected")},received:function(e){console.debug("DealtCardChannel received: ",e),i(e)},rejected:function(e){console.debug("DealtCardChannel rejected",e)}}),window.addEventListener("resize",(function(){var e=.01*window.innerHeight;window.document.documentElement.style.setProperty("--vh","".concat(e,"px"))}));var s=.01*window.innerHeight;window.document.documentElement.style.setProperty("--vh","".concat(s,"px"))}},{key:"componentWillUnmount",value:function(){this.App.ChipChannel.unsubscribe(),this.App.DealtCardChannel.unsubscribe()}},{key:"render",value:function(){var e,t=this.props,a=t.gameTable,n=t.playerSession,c=t.onGameStart,o=t.players,i=t.tableId,l=t.tableName,d=t.onBetAction,m=!!o.find((function(e){return e.id===n.playerId})),b=!(!(e=a.gameHandState)||"finished"===e||"init"===e),E=o.find((function(e){return e.id===n.playerId}));return a.isReady?r.a.createElement("div",{id:"baseWrapper",style:{background:"#003300"}},r.a.createElement(Be.a,{open:a.reconnectingActionCable},r.a.createElement(Pe.a,null,"\u518d\u63a5\u7d9a\u4e2d\u30fb\u30fb\u30fb"),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(u.a,null))),(b||o.length>1)&&"init"!==a.round&&r.a.createElement(Ye,{handCount:a.gameHandCount,round:a.round}),r.a.createElement(s.a,{display:"flex",height:"100%",flexDirection:"column",alignItems:"center"},r.a.createElement("div",{style:{height:"calc(100% - 80px)",width:"100%"}},r.a.createElement(Mt,{tableName:l,tableId:i,onGameStart:c,players:o,playerSession:n,isSeated:m,inGame:b,gameTable:a,onBetAction:d})),r.a.createElement("div",{style:{height:"80px",maxWidth:"640px",width:"100%"}},E&&b&&!a.showOrMuck&&a.currentSeatNo===E.seat_no&&(E.isFetching?r.a.createElement(De,null):!E.isHiddenPanel&&r.a.createElement(Le,null))))):r.a.createElement(p,null)}}]),a}(n.Component),Ut=Object(o.b)((function(e,t){var a=e.scenes.Tables.Room,n=t.match.params.id;return{tableId:n,tableName:n,players:a.Players,playerSession:e.data.playerSession,gameTable:a.GameTable,onBetAction:function(e,t){return function(e,t,a){return{type:"BET_ACTION",tableId:e,playerId:t,amount:a}}(n,e,t)}}}),(function(e,t){var a=t.match.params.id;return{onGameHandFinishedReceived:function(t){e({type:"GAME_HAND_FINISHED_RECEIVED"})},onGameHandActionReceived:function(t){var a,n;e((a=t.pot,n=t.players,{type:"GAME_HAND_ACTION_RECEIVED",pot:a,players:n}))},onPlayerActionReceived:function(t){e(function(e){var t=e.pot,a=e.game_hand_state,n=e.players,r=e.current_seat_no,c=e.button_seat_no,o=e.last_aggressive_seat_no,i=e.undoable,l=e.game_hand_count,s=e.board_cards,u=e.show_or_muck,d=e.reached_rounds,p=e.reaching_rounds;return{type:"BEFORE_PLAYER_ACTION_RECEIVED",pot:t,gameHandState:a,round:a,currentSeatNo:r,players:n,buttonSeatNo:c,lastAggressiveSeatNo:o,undoable:i,gameHandCount:l,boardCards:s,showOrMuck:u,reachedRounds:d,lastAction:e.last_action,reachingRounds:p,justActioned:e.just_actioned,tableId:e.table_id}}(t))},onDealtCardsReceived:function(t){e(function(e){return{type:"DEALT_CARD_RECEIVED",cards:e.cards,playerId:e.player_id}}(t))},onGameStart:function(){e(function(e){return{type:"GAME_START_BUTTON_CLICKED",tableId:e}}(a))},onActionCableConnected:function(){e({type:"ACTION_CABLE_CONNECTED"})},onActionCableDisconnected:function(){e({type:"ACTION_CABLE_DISCONNECTED"})}}}))(Gt);var Yt=function(){return Object(o.d)((function(e){return e.data.playerSession})).isReady?r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement(m,{exact:!0,path:"/",component:D}),r.a.createElement(l.b,{exact:!0,path:"/login",component:oe}),r.a.createElement(m,{exact:!0,path:"/newTable",component:pe}),r.a.createElement(m,{exact:!0,path:"/tables",component:ve}),r.a.createElement(m,{exact:!0,path:"/tables/:id",component:Ut}))):r.a.createElement(p,null)};a(163);var Kt,zt=a(47),Wt=a(113),Qt={},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PLAYER_SUCCEEDED":return Object.assign({},e,{isReady:!0,isLoggedIn:!0,nickname:t.nickname,playerId:t.playerId,imageUrl:t.imageUrl});case"FETCH_PLAYER_FAILED":return Object.assign({},e,{isReady:!0});case"LOGIN_FORM_ON_SUBMIT":return Object.assign({},e,{isFetching:!0});case"LOGIN_FORM_ON_SUCCESS":return Object.assign({},e,{isFetching:!1,isLoggedIn:!0,nickname:t.nickname,playerId:t.playerId});default:return e}},Zt={isTableCreated:!1},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_TABLE_FORM":return Zt;case"CREATE_TABLE_FORM_ON_SUBMIT":return Object.assign({},e,{isFetching:!0});case"CREATE_TABLE_FORM_ON_SUCCESS":return Object.assign({},e,{isFetching:!1,tableId:t.tableId,isTableCreated:!0});case"CREATE_TABLE_FORM_ON_FAILURE":return Object.assign({},e,{isFetching:!1});case"LOADING_TABLES_DATA":return Object.assign({},e,{isPrepared:!1});case"LOADING_TABLES_DATA_ON_SUCCESS":return Object.assign({},e,{isPrepared:!0,tables:t.tables});default:return e}},Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{playerSession:Jt(e.playerSession,t),tables:Vt(e.tables,t)}},qt={openingPlayerMenuDialogPlayerId:null,isReady:!1,pot:0,reconnectingActionCable:!1,dealtCards:[],buyInAmount:"",isOpenGameStartCountdown:!1,timeToStart:0},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETUP_GAME_START_TIMER":return Object(V.a)({},e,{isOpenGameStartCountdown:!0,timeToStart:t.seconds});case"GAME_START_COMPLETED":return Object(V.a)({},e,{isOpenGameStartCountdown:!1});case"ON_CHANGE_BUY_IN_AMOUNT":return Object.assign({},e,{buyInAmount:t.amount});case"DEALT_CARD_RECEIVED":var a=Object.assign({},e.dealtCards);return a[t.playerId]=t.cards,Object.assign({},e,{dealtCards:a,isOpenGameStartCountdown:!1});case"OPEN_BOARD_CARD_BY_ROUND":return Object.assign({},e,{reachedRounds:t.reachedRounds,boardCards:t.boardCards});case"PLAYER_ACTION_RECEIVED":return Object.assign({},e,{isReady:!0,pot:t.pot,gameHandState:t.gameHandState,round:t.round,currentSeatNo:t.currentSeatNo,buttonSeatNo:t.buttonSeatNo,lastAggressiveSeatNo:t.lastAggressiveSeatNo,undoable:t.undoable,gameHandCount:t.gameHandCount,boardCards:t.boardCards,showOrMuck:t.showOrMuck,reachedRounds:t.reachedRounds});case"OPEN_PLAYER_MENU_DIALOG":return Object.assign({},e,{openingPlayerMenuDialogPlayerId:t.playerId});case"CLOSE_PLAYER_MENU_DIALOG":return Object.assign({},e,{openingPlayerMenuDialogPlayerId:null});case"OPEN_BUY_IN_DIALOG":return Object.assign({},e,{isOpenedBuyInDialog:!0,selectingSeatNo:t.seatNo,buyInPlayerId:t.playerId});case"CLOSE_BUY_IN_DIALOG":return Object.assign({},e,{isOpenedBuyInDialog:!1,selectingSeatNo:null,buyInAmount:""});case"PLAYER_TAKE_SEAT":return Object.assign({},e,{buyInAmount:""});case"PLAYER_ACTION_TAKE_SEAT_COMPLETED":case"PLAYER_ACTION_TAKE_SEAT_FAILED":return Object.assign({},e,{isOpenedBuyInDialog:!1,selectingSeatNo:null});case"ACTION_CABLE_CONNECTED":return Object.assign({},e,{reconnectingActionCable:!1});case"ACTION_CABLE_DISCONNECTED":return Object.assign({},e,{reconnectingActionCable:!0});default:return e}},ea={betSize:0},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1?arguments[1]:void 0,a=e;if(a.id!==t.playerId)return a;var n=0;switch(t.type){case"OTHER_PLAYER_ACTION":return Object.assign({},a,{actionType:t.actionType});case"PROGRESS_PLAYER_ACTION_TIMER":return Object.assign({},a,{remain_time_to_action:t.remainTimeToAction});case"CHANGE_BET_AMOUNT":return Object.assign({},a,{betSize:t.amount});case"SET_BET_SIZE":return n=t.amount,Object.assign({},a,{betSize:n});case"RESET_BET_SIZE":return Object.assign({},a,{betSize:0});case"INCREMENT_BET_SIZE":return n=(a.betSize||0)+t.amount,t.playerStack<n&&(n=t.playerStack),Object.assign({},a,{betSize:n});case"DECREMENT_BET_SIZE":return(n=(a.betSize||0)-t.amount)<0&&(n=0),Object.assign({},a,{betSize:n});case"CHECK_ACTION":return Object.assign({},a,{isFetching:!0,isHiddenPanel:!0});case"CHECK_ACTION_COMPLETED":case"CHECK_ACTION_FAILED":return Object.assign({},a,{isFetching:!1});case"BET_ACTION":return Object.assign({},a,{isFetching:!0,isHiddenPanel:!0});case"BET_ACTION_COMPLETED":case"BET_ACTION_FAILED":return Object.assign({},a,{isFetching:!1});case"CALL_ACTION":return Object.assign({},a,{isFetching:!0,isHiddenPanel:!0});case"CALL_ACTION_COMPLETED":case"CALL_ACTION_FAILED":return Object.assign({},a,{isFetching:!1});case"FOLD_ACTION":return Object.assign({},a,{isFetching:!0,isHiddenPanel:!0});case"FOLD_ACTION_COMPLETED":case"FOLD_ACTION_FAILED":return Object.assign({},a,{isFetching:!1});default:return a}},aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OTHER_PLAYER_ACTION":case"PROGRESS_PLAYER_ACTION_TIMER":return e.map((function(e){return ta(e,t)}));case"PLAYER_ACTION_RECEIVED":return t.players;case"SHOW_ACTIVE_PLAYER_CARDS":return e.map((function(e){var a=t.players.find((function(t){return t.id===e.id}));return Object(V.a)({},e,{cards:a.cards,hand_show:a.hand_show,state:a.state})}));case"CHANGE_BET_AMOUNT":case"SET_BET_SIZE":case"RESET_BET_SIZE":case"INCREMENT_BET_SIZE":case"DECREMENT_BET_SIZE":case"CHECK_ACTION":case"CHECK_ACTION_COMPLETED":case"CHECK_ACTION_FAILED":case"BET_ACTION":case"BET_ACTION_COMPLETED":case"BET_ACTION_FAILED":case"CALL_ACTION":case"CALL_ACTION_COMPLETED":case"CALL_ACTION_FAILED":case"FOLD_ACTION":case"FOLD_ACTION_COMPLETED":case"FOLD_ACTION_FAILED":return e.map((function(e){return ta(e,t)}));default:return e}},na={},ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=arguments.length>1?arguments[1]:void 0;return{GameTable:$t(e.GameTable,t),Players:aa(e.Players,t)}},ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{Room:ra(e.Room,t)}},oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{Tables:ca(e.Tables,t)}},ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{data:Xt(e.data,t),scenes:oa(e.scenes,t)}},la=a(49),sa=a(114),ua=a(5),da=A.a.mark(ja),pa=A.a.mark(Sa),ma=A.a.mark(ka),ba=A.a.mark(Ra),Ea=A.a.mark(wa),fa=A.a.mark(La),Aa=A.a.mark(Da),ha=A.a.mark(Ba),Ca=A.a.mark(Pa),Oa=A.a.mark(Fa),_a=A.a.mark(Ha),va=A.a.mark(Ga),ga=A.a.mark(Ua),Ia=A.a.mark(Ka),ya=A.a.mark(za),Ta=A.a.mark(Wa),Na=A.a.mark(Xa),xa=A.a.mark(on);function ja(e){var t,a;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.tableId,a=e.playerId,n.prev=1,n.next=4,Object(ua.b)(N,"PLAYER_ACTION_CHECK",t,a);case 4:return n.next=6,Object(ua.d)({type:"CHECK_ACTION_COMPLETED",tableId:t,playerId:a});case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),console.log(n.t0),n.next=13,Object(ua.d)({type:"CHECK_ACTION_FAILED",tableId:t,playerId:a});case 13:case"end":return n.stop()}}),da,null,[[1,8]])}function Sa(e){var t,a;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.tableId,a=e.playerId,n.prev=1,n.next=4,Object(ua.b)(N,"PLAYER_ACTION_MUCK_HAND",t,a);case 4:return n.next=6,Object(ua.d)({type:"MUCK_HAND_ACTION_COMPLETED",tableId:t,playerId:a});case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),console.log(n.t0),n.next=13,Object(ua.d)({type:"MUCK_HAND_ACTION_FAILED",tableId:t,playerId:a});case 13:case"end":return n.stop()}}),pa,null,[[1,8]])}function ka(e){var t,a;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.tableId,a=e.playerId,n.prev=1,n.next=4,Object(ua.b)(N,"PLAYER_ACTION_SHOW_HAND",t,a);case 4:return n.next=6,Object(ua.d)({type:"SHOW_HAND_ACTION_COMPLETED",tableId:t,playerId:a});case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),console.log(n.t0),n.next=13,Object(ua.d)({type:"SHOW_HAND_ACTION_FAILED",tableId:t,playerId:a});case 13:case"end":return n.stop()}}),ma,null,[[1,8]])}function Ra(e){var t,a;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.tableId,a=e.playerId,n.prev=1,n.next=4,Object(ua.b)(N,"PLAYER_ACTION_FOLD",t,a);case 4:return n.next=6,Object(ua.d)({type:"FOLD_ACTION_COMPLETED",tableId:t,playerId:a});case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),console.log(n.t0),n.next=13,Object(ua.d)({type:"FOLD_ACTION_FAILED",tableId:t,playerId:a,error:n.t0});case 13:case"end":return n.stop()}}),ba,null,[[1,8]])}function wa(e){var t,a;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.tableId,a=e.playerId,n.prev=1,n.next=4,Object(ua.b)(N,"PLAYER_ACTION_CALL",t,a);case 4:return n.next=6,Object(ua.d)({type:"CALL_ACTION_COMPLETED",tableId:t,playerId:a});case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),console.log(n.t0),n.next=13,Object(ua.d)({type:"CALL_ACTION_FAILED",tableId:t,playerId:a,error:n.t0});case 13:case"end":return n.stop()}}),Ea,null,[[1,8]])}function La(e){var t,a,n,r,c;return A.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.tableId,a=e.playerId,n=e.amount,o.prev=1,o.next=4,Object(ua.b)(N,"PLAYER_ACTION_BET_CHIPS",t,a,n);case 4:return r=o.sent,c=r.data.pot,o.next=8,Object(ua.d)({type:"BET_ACTION_COMPLETED",tableId:t,playerId:a,amount:n,pot:c});case 8:o.next=15;break;case 10:return o.prev=10,o.t0=o.catch(1),console.log(o.t0),o.next=15,Object(ua.d)({type:"BET_ACTION_FAILED",tableId:t,playerId:a,error:o.t0});case 15:case"end":return o.stop()}}),fa,null,[[1,10]])}function Da(e){var t,a,n,r,c,o;return A.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.tableId,a=e.playerId,i.prev=1,i.next=4,Object(ua.b)(N,"GAME_HAND_TAKE_POT",t,a);case 4:return n=i.sent,r=Object(q.camelizeKeys)(n.data),c=r.pot,o=r.playerStack,i.next=8,Object(ua.d)({type:"TAKE_POT_ACTION_COMPLETED",tableId:t,playerId:a,pot:c,playerStack:o});case 8:i.next=15;break;case 10:return i.prev=10,i.t0=i.catch(1),console.log(i.t0),i.next=15,Object(ua.d)({type:"TAKE_POT_ACTION_FAILED",tableId:t,playerId:a,error:i.t0});case 15:case"end":return i.stop()}}),Aa,null,[[1,10]])}function Ba(e){var t,a,n,r,c,o,i;return A.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.amount,a=e.tableId,n=e.playerId,r=e.seatNo,c=e.buyInAmount,l.prev=1,l.next=4,Object(ua.b)(y,a,n,r,c);case 4:return o=l.sent,i=o.data,l.next=8,Object(ua.d)({type:"PLAYER_ACTION_TAKE_SEAT_COMPLETED",tableId:a,playerId:n,amount:t,pot:i.pot});case 8:l.next=15;break;case 10:return l.prev=10,l.t0=l.catch(1),console.log(l.t0),l.next=15,Object(ua.d)({type:"PLAYER_ACTION_TAKE_SEAT_FAILED",tableId:a,playerId:n,error:l.t0});case 15:case"end":return l.stop()}}),ha,null,[[1,10]])}function Pa(e){var t,a;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.tableId,a=e.seatNo,n.prev=1,n.next=4,Object(ua.b)(T,t,a);case 4:return n.next=6,Object(ua.d)({type:"ON_SUCCESS_ADD_NPC_PLAYER"});case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(1),n.next=12,Object(ua.d)({type:"ON_FAILURE_ADD_NPC_PLAYER"});case 12:case"end":return n.stop()}}),Ca,null,[[1,8]])}function Fa(){var e,t,a;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ua.b)(k);case 3:return e=n.sent,t=e.data,a=Object(q.camelizeKeys)(t),n.next=8,Object(ua.d)(Object(V.a)({type:"FETCH_PLAYER_SUCCEEDED"},a));case 8:n.next=15;break;case 10:return n.prev=10,n.t0=n.catch(0),sessionStorage.setItem("redirectTo",window.location.href),n.next=15,Object(ua.d)({type:"FETCH_PLAYER_FAILED"});case 15:case"end":return n.stop()}}),Oa,null,[[0,10]])}function Ha(e){var t;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.tableId,a.prev=1,a.next=4,Object(ua.b)(x,t);case 4:return a.next=6,Object(ua.d)({type:"GAME_START_COMPLETED",tableId:t});case 6:a.next=13;break;case 8:return a.prev=8,a.t0=a.catch(1),console.log(a.t0),a.next=13,Object(ua.d)({type:"GAME_START_FAILED",tableId:t});case 13:case"end":return a.stop()}}),_a,null,[[1,8]])}function Ma(e){return Object(la.c)((function(t){var a=setInterval((function(){t(la.a)}),1e3*e);return function(){clearInterval(a)}}))}function Ga(e,t,a){var n;return A.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ua.b)(Ma,a);case 3:return n=r.sent,r.next=6,Object(ua.g)(n);case 6:return r.prev=6,r.next=9,Object(ua.d)({type:"OPEN_BOARD_CARD_BY_ROUND",reachedRounds:e,boardCards:t});case 9:return r.finish(6);case 10:case"end":return r.stop()}}),va,null,[[0,,6,10]])}function Ua(e){var t,a,n,r,c;return A.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(e.justActioned&&e.reachingRounds.length>0)){o.next=23;break}return o.next=3,Object(ua.d)({type:"SHOW_ACTIVE_PLAYER_CARDS",players:e.players});case 3:if(t={},e.reachingRounds.includes("flop")){o.next=8;break}return t={flop:e.reachingRounds.includes("turn")||e.reachingRounds.includes("river"),turn:!e.reachingRounds.includes("turn")&&e.reachingRounds.includes("river")},o.next=8,Object(ua.b)(Ga,t,e.boardCards,0);case 8:return o.next=10,Object(ua.a)(e.reachingRounds.map((function(a,n){return(t=Object.assign({},t))[a]=!0,Object(ua.b)(Ga,t,e.boardCards,2*(n+1))})));case 10:return o.prev=10,o.next=13,Object(ua.b)(Ma,2);case 13:return a=o.sent,o.next=16,Object(ua.g)(a);case 16:return o.prev=16,o.next=19,Object(ua.d)(Object.assign({},e,{type:"PLAYER_ACTION_RECEIVED"}));case 19:return o.next=21,Object(ua.d)({type:"SETUP_GAME_START_TIMER",tableId:e.tableId,seconds:10});case 21:return o.abrupt("return");case 23:if(!e.lastAction||"blind"===e.lastAction.action_type||"taken"===e.lastAction.action_type){o.next=42;break}return o.next=26,Object(ua.d)({type:"OTHER_PLAYER_ACTION",actionType:e.lastAction.action_type,playerId:e.lastAction.player_id});case 26:return o.prev=26,o.next=29,Object(ua.b)(Ma,.8);case 29:return n=o.sent,o.next=32,Object(ua.g)(n);case 32:return o.prev=32,r=Object.assign({},e,{type:"PLAYER_ACTION_RECEIVED"}),o.next=36,Object(ua.d)(r);case 36:if("finished"!==e.gameHandState){o.next=39;break}return o.next=39,Object(ua.d)({type:"SETUP_GAME_START_TIMER",tableId:e.tableId,seconds:10});case 39:return o.finish(32);case 40:o.next=48;break;case 42:return c=Object.assign({},e,{type:"PLAYER_ACTION_RECEIVED"}),o.next=45,Object(ua.d)(c);case 45:if("finished"!==e.gameHandState){o.next=48;break}return o.next=48,Object(ua.d)({type:"SETUP_GAME_START_TIMER",tableId:e.tableId,seconds:10});case 48:case"end":return o.stop()}}),ga,null,[[10,,16,23],[26,,32,40]])}function Ya(e){return Object(la.c)((function(t){var a=setInterval((function(){(e-=1e3)<=0&&t(la.a)}),1e3);return function(){clearInterval(a)}}))}function Ka(e){var t,a;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=1e3*e.seconds,n.next=3,Object(ua.b)(Ya,t);case 3:return a=n.sent,n.prev=4,n.next=7,Object(ua.g)(a);case 7:return n.prev=7,n.next=10,Object(ua.c)();case 10:if(!n.sent){n.next=14;break}a.close(),n.next=16;break;case 14:return n.next=16,Object(ua.d)({type:"GAME_START_BUTTON_CLICKED",tableId:e.tableId});case 16:return n.finish(7);case 17:case"end":return n.stop()}}),Ia,null,[[4,,7,17]])}function za(e){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ua.e)([Object(ua.b)(Ka,e),Object(ua.g)("GAME_START_BUTTON_CLICKED"),Object(ua.g)("PLAYER_ACTION_RECEIVED")]);case 2:case"end":return t.stop()}}),ya)}function Wa(){var e;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=sessionStorage.getItem("redirectTo"),sessionStorage.removeItem("redirectTo"),!e){t.next=6;break}window.location=e,t.next=8;break;case 6:return t.next=8,Object(ua.d)({type:"FETCH_PLAYER"});case 8:case"end":return t.stop()}}),Ta)}function Qa(){navigator.mediaDevices.getUserMedia({audio:!0,video:{width:"320",height:"240"}}).then((function(e){Kt=e,document.getElementById("local-video").srcObject=e})).catch((function(e){return console.log("Error!: ",e)}))}var Ja,Za=localStorage.getItem("playerSession.jwt"),Va=He.a.createConsumer("".concat(O,"/cable?jwt=").concat(Za));function Xa(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ua.f)((function(e){return e.data.playerSession.playerId}));case 2:return Ja=e.sent,Ja="".concat(Ja),e.next=6,Va.subscriptions.create({channel:"TestChannel"},{connected:function(){console.log("ActionCable connected."),rn({type:"JOIN_ROOM",from:Ja})},received:function(e){if(e.from!==Ja)switch(console.log("ActionCable received: ",e),e.type){case"JOIN_ROOM":return $a(e);case"EXCHANGE":if(e.to!==Ja)return;return nn(e);case"REMOVE_USER":return en(e);default:return}}});case 6:e.sent;case 7:case"end":return e.stop()}}),Na)}var qa={};var $a=function(e){an(e.from,!0)},en=function(e){console.log("Removing user",e.from);var t=document.getElementById("remoteVideoContainer+".concat(e.from));t&&t.remove(),delete qa[e.from]},tn={iceServers:[{urls:"stun:stun.l.google.com:19302"}]};function an(e,t){var a=new RTCPeerConnection(tn);qa[e]=a;var n,r=Object(sa.a)(Kt.getTracks());try{for(r.s();!(n=r.n()).done;){var c=n.value;a.addTrack(c,Kt)}}catch(o){r.e(o)}finally{r.f()}return t&&a.createOffer().then((function(e){return a.setLocalDescription(e)})).then((function(){rn({type:"EXCHANGE",from:Ja,to:e,sdp:JSON.stringify(a.localDescription)})})).catch(cn),a.onicecandidate=function(t){t.candidate&&rn({type:"EXCHANGE",from:Ja,to:e,candidate:JSON.stringify(t.candidate)})},a.ontrack=function(t){if("video"===t.track.kind){var a=document.getElementById("video-player-".concat(e));a.autoplay="autoplay",a.srcObject=t.streams[0]}},a.oniceconnectionstatechange=function(t){"disconnected"===a.iceConnectionState&&(console.log("Disconnected: ",e),rn({type:"REMOVE_USER",from:e}))},a}var nn=function(e){var t;if(t=qa[e.from]?qa[e.from]:an(e.from,!1),e.candidate&&t.addIceCandidate(new RTCIceCandidate(JSON.parse(e.candidate))).then((function(){return console.log("Ice candidate added")})).catch(cn),e.sdp){var a=JSON.parse(e.sdp);t.setRemoteDescription(new RTCSessionDescription(a)).then((function(){"offer"===a.type&&t.createAnswer().then((function(e){return t.setLocalDescription(e)})).then((function(){rn({type:"EXCHANGE",from:Ja,to:e.from,sdp:JSON.stringify(t.localDescription)})}))})).catch(cn)}};function rn(e){!function(e){var t=new FormData;Object.keys(e).map((function(a){return t.append(a,e[a])})),I.post("tests",t)}(e)}var cn=function(e){return console.log(e)};function on(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ua.h)("FETCH_PLAYER",Fa);case 2:return e.next=4,Object(ua.h)("BET_ACTION",La);case 4:return e.next=6,Object(ua.h)("CALL_ACTION",wa);case 6:return e.next=8,Object(ua.h)("FOLD_ACTION",Ra);case 8:return e.next=10,Object(ua.h)("CHECK_ACTION",ja);case 10:return e.next=12,Object(ua.h)("MUCK_HAND_ACTION",Sa);case 12:return e.next=14,Object(ua.h)("SHOW_HAND_ACTION",ka);case 14:return e.next=16,Object(ua.h)("GAME_START_BUTTON_CLICKED",Ha);case 16:return e.next=18,Object(ua.h)("TAKE_POT_ACTION",Da);case 18:return e.next=20,Object(ua.h)("PLAYER_TAKE_SEAT",Ba);case 20:return e.next=22,Object(ua.h)("ADD_NPC_PLAYER",Pa);case 22:return e.next=24,Object(ua.h)("BEFORE_PLAYER_ACTION_RECEIVED",Ua);case 24:return e.next=26,Object(ua.h)("SETUP_GAME_START_TIMER",za);case 26:return e.next=28,Object(ua.b)(Wa);case 28:return e.next=30,Object(ua.h)("HANDLE_JOIN_SESSION",Xa);case 30:return e.next=32,Object(ua.h)("INITIALIZE_WEBRTC",Qa);case 32:case"end":return e.stop()}}),xa)}var ln=Object(Wt.createLogger)({duration:!0,collapsed:!0});var sn=a(211),un=(a(164),a(115)),dn=Object(un.a)({palette:{primary:{main:"#5B9FA4"},twitter:{main:"#1DA1F2"}},typography:{useNextVariants:!0}}),pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(la.b)(),a=Object(zt.d)(ia,e,Object(zt.a)(t,ln));return t.run(on),a}();Object(c.render)(r.a.createElement(sn.a,{theme:dn},r.a.createElement(o.a,{store:pn},r.a.createElement(Yt,null))),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}))}},[[132,1,2]]]);
//# sourceMappingURL=main.d2040d67.chunk.js.map